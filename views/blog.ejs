<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Blog</title>

    <!-- Dependencies -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.js"
        integrity="sha256-2JRzNxMJiS0aHOJjG+liqsEOuBb6++9cY4dSOyiijX4=" crossorigin="anonymous"></script>

    <!-- Stylesheet reference -->
    <link rel="stylesheet" href="css/blog.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/popup.css">
    <link rel="stylesheet" href="css\glide\blog\glide.core.min.css">
    <link rel="stylesheet" href="css\glide\blog\glide.theme.min.css">

</head>

<header>
    <!-- ------------- NAVIGATION ------------- -->
    <nav class="nav">
        <div class="nav-bar flex-row">

            <div class="nav-brand">

                <a href="http://localhost:3000/">
                    <img class="brand-logo" src="assets/svg/blog.svg" width="50">
                    <span class="brand-brandname">Blog</span>
                </a>
            </div>

            <!-- ------------- Menu used if screen <= 750px  ------------- -->
            <div class="menu">
                <div class="icons">
                    <span>
                        <i class="fas fa-bars"></i>
                    </span>
                </div>
            </div>

            <div>
                <ul class="nav-items">
                    <li class="nav-link" id="link-home">
                        <a href="http://localhost:3000/">Home</a>
                    </li>
                    <li class="nav-link" id="link-about">
                        <a href="http://localhost:3000/about">About</a>
                    </li>
                </ul>
            </div>

            <button data-modal-target="#modal" class="user">
                <i class="fas fa-user-circle"></i>
            </button>
        </div>
    </nav>
</header>
<!-- The Java Script file that controls the navbar-->
<script src="js/navbar.js"></script>

<body>

    <!-- ------------- Login Pop-up  ------------- -->
    <div class="modal" id="modal">

        <button data-modal-close class="btn-login-close">&times;</button>

        <div class="modal-header">
            <div class="title title-login" id="title-login">Login</div>
            <div class="title title-register" id="title-register">Register</div>
        </div>

        <div class="modal-body">
            <form class="modal-form" action="${pageContext.request.contextPath}/login" method="post">

                <div class="form-section form-username">
                    <span class="form-txt txt-username">
                        Username:
                    </span>
                    <input class="txt-in" type="text" name="username">
                </div>

                <div class="form-section form-password">
                    <span class="form-txt txt-password">
                        Password:
                    </span>
                    <input class="txt-in" type="password" name="password">
                </div>

                <div class="form-section form-confirm" id="form-confirm">
                    <span class="form-txt txt-confirm">
                        Confirm Password:
                    </span>
                    <input class="txt-in" type="text" name="name">
                </div>

                <div class="form-section form-email" id="form-email">
                    <span class="form-txt txt-email">
                        Email:
                    </span>
                    <input class="txt-in" type="text" name="email">
                </div>

                <button class="popup-btn btn_login_register" name="btn_request" type="submit" value="register"
                    id="btn-register">
                    Register
                </button>

                <button class="popup-btn btn_login_login" name="btn_request" type="submit" value="login" id="btn-login">
                    Login
                </button>
            </form>
        </div>
    </div>
    <div id="overlay"></div>

    <!-- Popup Script -->
    <script src="js/popup.js" onload="highlightLogin()"></script>

    <main>


        <section class="site-intro" id="intro">

            <div class="intro-blog">
                <h2>Blog Description</h2>
                <p>This blog consists of projects that Ã–jvind Nilsson and Peter Tenghamn have worked together on while
                    studying in HKR. Some projects were developed in larger groups while some were just us two. We hope
                    you enjoy our blog!</p>
            </div>

            <div class="intro-users">

                <h2>Subscribed Users</h2>
                <div class="container-users">
                </div>
                <!-- The carousel section-->
                <div class="glide">

                    <!-- The contents of the carousel-->
                    <div class="glide__track" data-glide-el="track">
                        <ul class="glide__slides">
                            <li class="glide__slide">
                                <img src="assets/vectors/user_avatars/001-man.svg" alt="User Avatar">
                                <h3>Username 1</h3>
                            </li>
                            <li class="glide__slide">
                                <img src="assets/vectors/user_avatars/001-man.svg" alt="User Avatar">
                                <h3>Username 2</h3>
                            </li>
                            <li class="glide__slide">
                                <img src="assets/vectors/user_avatars/001-man.svg" alt="User Avatar">
                                <h3>Username 3</h3>
                            </li>
                            <li class="glide__slide">
                                <img src="assets/vectors/user_avatars/001-man.svg" alt="User Avatar">
                                <h3>Username 4</h3>
                            </li>
                        </ul>

                    </div>

                </div>
            </div>

            <!-- Scripts controlling the carousel -->
            <script src="https://cdn.jsdelivr.net/npm/@glidejs/glide"></script>
            <!-- Loading of carousel dependency -->
            <script>
                const config = {
                    type: 'slider',
                    perView: 3,

                    gap: '10',
                    hoverpause: true,
                    autoplay: 2000,
                    peek: {
                        before: 10,
                        after: 10
                    }
                }

                new Glide('.glide', config).mount()
            </script>

        </section>

        <section class="site-content" id="content">



            <%
    if(posts.length!=0){
        posts.forEach(function(data){
            var id = data.id%>

            <h4>Sept 13, 2020</h4>

            <div class="item">

                <img src="assets/gifs/demo_MapleStory.gif" alt="Demo of Project">

                <h1><%=data.title%></h1>
                <h3><%=data.snippet%></h3>
                <hr>

                <h2>Comments</h2>
                <p><%=data.comments%></p>
                <hr>

                <div class="item-buttons">

                    <!-- This should only be displayed if the user is logged in -->
                    <button class="btn">
                        Comment
                    </button>

                    <!-- This should only be displayed if the user logged in is an admin -->
                    <a href="http://localhost:3000/post/<%=id%>">Edit Post <%=id%></a>
                </div>
            </div>

            <% })
    } else { %>

            <div class="item">

                <h1>Something Went Wrong</h1>
                <img src="https://www.elegantthemes.com/blog/wp-content/uploads/2020/01/http-error-503-featured-image.jpg"
                    alt="Oops">
                <p>Nothing was received by the database! If you are a user seeing this ignore it and contact us about
                    it! </p>

            </div>

            <% } %>

        </section>

        <div class="section-padding"></div>
    </main>
</body>

</html>